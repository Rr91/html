function Echo(){var t=this;return t.config_relative={infinite:!1,slidesToShow:6,slidesToScroll:6,respondTo:"slider",responsive:[{breakpoint:1e3,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:500,settings:{slidesToScroll:2,slidesToShow:2}}]},t.init=function(){return $(document).ready(function(){$(".b-preloader").length>0&&$(window).load(function(){$(".b-preloader").fadeOut("slow",function(){$(this).remove()})}),$("a[href*=#]:not([href=#])").click(function(t){if($(this).data("toggle")||$(this).hasClass("open-popup"));else if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname&&location.search==this.search){var e=$(this.hash);(e=e.length?e:$("[name="+this.hash.slice(1)+"]")).length&&($("html,body").stop(!1,!1).animate({scrollTop:e.offset().top},800),t.preventDefault(),$(this).closest(".navbar-collapse.in").length>0&&$(".navbar-toggle:visible").click())}}),$(".i-mainslider .i-catalog__carousel").slick(),$(".i-photos__carousel").slick({centerMode:!0,centerPadding:"0",slidesToShow:3,responsive:[{breakpoint:768,settings:{slidesToShow:3}},{breakpoint:480,settings:{slidesToShow:1}}]}),$(".i-gallery__carousel").slick({slidesToShow:1,adaptiveHeight:!1}),$(".i-reviews__carousel").slick({slidesToShow:1,dots:!0});var t=$(".b-footer__scroll");if(t.length>0&&($(window).scroll(function(){$(this).scrollTop()>500?t.fadeIn():t.fadeOut()}),t.click(function(t){$("html, body").stop(!1,!1).animate({scrollTop:0},800),t.preventDefault()})),$(".b-menu--fixed").sticky({topSpacing:0,zIndex:14}),$(".open-popup").fancybox({type:"ajax",padding:0,margin:0,afterShow:function(){try{$(".fancybox-inner .i-slick").slick("setPosition")}catch(t){}},helpers:{title:null,overlay:{locked:!0}}}),$(".open-popup--terms").fancybox({type:"ajax",maxWidth:960}),$(".fancybox").fancybox({padding:0,helpers:{title:{type:"outside"}},beforeShow:function(){this.title&&(this.title="<strong>"+this.title+"</strong>"),$(this.element).data("description")&&(this.title+=" "+$(this.element).data("description"))},tpl:{closeBtn:'<a class="fancybox-item fancybox-close fancybox-close--image" href="javascript:;"></a>'}}),$(this).width()>768&&$(window).load(function(){$(window).stellar({horizontalScrolling:!1})}),"ontouchstart"in window&&$(".parallax").css("background-attachment","scroll"),window.location.hash.length>0){var e=$(window.location.hash);e.length>0&&window.scrollTo(0,e.offset().top)}}),t},t.init()}function echoSiteProduct(t){var e=this;e.show_image=function(e){e&&t.find(".i-product__thumb--"+e).click()},e.init=function(){var e=t.find(".i-product__thumbs");e.length>0&&(e.data("list")||e.imagesLoaded(function(){e.slick({slidesToShow:3,infinite:!1,responsive:[{breakpoint:480,settings:{slidesToShow:2}}]})})),t.find(".i-product__thumb").on("click",function(e){e.preventDefault();var i=$(this);if(i.closest(".i-product__thumbs").find(".i-product__thumb").removeClass("b-product__thumb--active"),i.addClass("b-product__thumb--active"),i.data("video"))t.find(".i-product__video").removeClass("hidden"),t.find(".i-product__main_image").addClass("hidden");else{t.find(".i-product__video").addClass("hidden");var n=t.find(".i-product__main_image").removeClass("hidden");n.find(".i-image").addClass("hidden"),n.find(".i-image--"+i.data("image_id")).removeClass("hidden")}}),$(window).width()>=768?t.find(".easyzoom").easyZoom():t.find(".i-product__main_image .i-image").on("click",function(t){t.preventDefault()});var i=t.find(".i-up-selling .i-catalog__carousel");i.length>0&&i.imagesLoaded(function(){i.slick(echo.config_relative)})},e.init()}function subscribe__success(){$(".i-subscribe__external_success").removeClass("hidden"),$(".i-subscribe__external").remove();var t=$(".i-subscribe__show_button");t.length&&t.hasClass("hidden")&&t.removeClass("hidden").hide().slideDown()}var echo=new Echo;$(function(){$("ul.auth-type-wrapper a").click(function(t){t.preventDefault();var e=(screen.width-600)/2,i=(screen.height-500)/2;window.open($(this).attr("href"),"oauth","width=600,height=500,left="+e+",top="+i+",status=no,toolbar=no,menubar=no")})}),$(function(){$(".b-blog__date_tooltip").tooltip({placement:"right"})}),$(document).on("click",".i-sort a,.i-pagination a,.i-category-choose a",function(t){t.preventDefault();var e=$(this).closest(".i-catalog"),i=e.find(".i-catalog__reload");i.find(".i-catalog__loading").removeClass("hidden"),$(this).closest(".i-pagination--bottom").length>0&&$("html,body").stop(!1,!1).animate({scrollTop:e.offset().top},400);var n=this.href;n=n+(-1==n.indexOf("?")?"?":"&")+e.data("type")+"_paginate=1",$.get(n,function(t){i.html(t),$(window).width()>768&&setTimeout(function(){$(window).stellar("destroy"),$(window).stellar({horizontalScrolling:!1})},500)})}),$(document).ready(function(){var t=$("#contact__form");if(t.length>0){var e=t.find("#contact__old_body"),i=t.find("#contact__phone"),n=t.find("#contact__body"),o=t.find("#contact__email");i.length>0&&e.val().length>0&&n.val(e.val()),o.length>0&&"empty@pisem.net"==o.val()&&o.val(""),t.on("submit",function(){t.find("*").removeAttr("style").removeClass("animated").css("transition","unset"),t.addClass("invisible"),$(".b-contact__loading").addClass("b-contact__loading--loading"),o.length>0&&""==o.val()&&o.val("empty@pisem.net"),i.length>0&&(e.val(n.val()),n.val(i.data("phone")+": "+i.val()+"\n\n"+n.val()))})}}),function(t){t.fn.downCount=function(e,i){var n=t.extend({date:null,offset:null},e);if(n.date){var o=String(n.date).split("-");n.date=new Date(o[0],o[1]-1,o[2],o[3],o[4],0)}else t.error("Date is not defined.");var a=this,s=function(){var t=new Date,e=t.getTime()+6e4*t.getTimezoneOffset();return new Date(e+36e5*n.offset)},l=setInterval(function(){var t=n.date-s();if(t<0)return clearInterval(l),void(i&&"function"==typeof i&&i());var e=Math.floor(t/864e5),o=Math.floor(t%864e5/36e5),r=Math.floor(t%36e5/6e4),d=Math.floor(t%6e4/1e3);e=String(e).length>=2?e:"0"+e,o=String(o).length>=2?o:"0"+o,r=String(r).length>=2?r:"0"+r,d=String(d).length>=2?d:"0"+d,a.find(".days").text(e),a.find(".hours").text(o),a.find(".minutes").text(r),a.find(".seconds").text(d)},1e3)}}(jQuery),jQuery(document).ready(function(t){var e=t(".b-countdown");e.length>0&&e.downCount({date:e.data("date"),offset:5})}),$(document).on("click",".i-faq__switch",function(t){t.preventDefault();var e=$(this).closest(".i-faq__item"),i=e.find(".b-faq__text");e.hasClass("b-faq--is-open")?i.stop(!1,!1).slideUp():("toggle"==e.data("view")&&$(".i-faq__item").not(e).each(function(){var t=$(this);t.hasClass("b-faq--is-open")&&(t.removeClass("b-faq--is-open"),t.find(".b-faq__text").stop(!1,!1).slideUp())}),i.stop(!1,!1).slideDown()),e.toggleClass("b-faq--is-open")});var renderProfilePage=function(t){var e={hiddenClass:"hidden",changeLink:!1,deletePhotoLink:!1,getWrapper:function(){return $("#wa-my-info-wrapper")},getForm:function(){return $("#wa-my-info-edit-wrapper")},getInfoBlock:function(){return $("#wa-my-info-read-wrapper")},getPassword:function(){return this.getWrapper().find(".wa-field-password")},getPhoto:function(){return this.getWrapper().find(".wa-field-photo")}},i=function(){var t=e.getPassword(),i=e.getPhoto();t.length&&a(),i.length&&o();$("#wa-my-info-edit-wrapper");n()},n=function(){$("#wa-my-info-edit").on("click",function(){return s(),!1}),$("#wa-my-info-cancel").on("click",function(){return l(),!1});var t=e.changeLink;t.length&&t.on("click",function(){return d($(this)),!1});var i=e.deletePhotoLink;i.length&&i.on("click",function(){return r($(this)),!1})},o=function(){var i=e.getPhoto(),n=$('<a class="general-button" href="javascript:void(0);">'+t.deletePhotoText+"</a>"),o=i.find("img:first"),a=i.find("img:last");o[0]!=a[0]?(a.hide(),a.after(n),e.deletePhotoLink=n):a.show()},a=function(){var i=$('<a class="general-button" href="javascript:void(0);">'+t.changePasswordText+"</a>"),n=e.getPassword();n.find("p").addClass(e.hiddenClass),n.find(".wa-value").prepend(i),e.changeLink=i},s=function(){var t=e.getForm(),i=e.getInfoBlock();t.removeClass(e.hiddenClass),i.addClass(e.hiddenClass)},l=function(){var t=e.getForm(),i=e.getInfoBlock();t.addClass(e.hiddenClass),i.removeClass(e.hiddenClass)},r=function(t){var i=e.getPhoto(),n=i.find('[name="profile[photo]"]'),o=i.find("img:first");i.find("img:last").show(),o.hide(),t.hide(),n.val("")},d=function(t){t.hide(),e.getPassword().find("p").removeClass(e.hiddenClass)};$(document).ready(function(){i()})};$(document).on("submit",".i-orderform__form",function(t){t.preventDefault();var e=$(this),i=e.closest(".i-orderform"),n=i.find(".b-orderform__loading"),o=e.find("#orderform__phone"),a=e.find(".i-orderform__param"),s=!1;if(o.length>0||a.length>0){var l=e.find("[name='body']"),r=(s=l.val())+"\n";o.length&&(r+="\n"+o.data("label")+": "+o.val()),a.each(function(){var t=$(this);r+="\n"+t.data("label")+": "+t.val()}),l.val(r)}n.show(),$.post(e.attr("action"),e.serialize(),function(t){!1!==s&&(t=$(t)).find("[name='body']").val(s),i.replaceWith(t);var e=$(".b-orderform__success").find(".i-order-succ .i-catalog__carousel");e.length>0&&e.imagesLoaded(function(){e.slick(echo.config_relative)})}).fail(function(t){console.log(t)}).always(function(){n.hide()})}),$(document).ready(function(){setInterval(function(){$(".b-related .slick-initialized").each(function(){var t=$(this),e=t.data("fix-width");e?e!=t.width()&&(t.slick("unslick"),t.slick(echo.config_relative),t.data("fix-width",t.width())):t.data("fix-width",t.width())})},250)}),$(function(){var t=$(".i-product-desc__load_product");t.removeClass("i-product-desc__load_product");var e=t.data("url");$.get(e,{desc:!0},function(e){t.removeClass("b-catalog__loading_product"),t.html(e)})}),$(document).ready(function(){var t=$("#subscribe .wa-subscribe-form");t.length&&t.find('[name="subscriber[email]"]').attr("required","required").attr("type","email")}),$(document).on("click",".i-technics__show_all",function(t){t.preventDefault(),$(".i-technics__more_list").slideDown(),$(this).addClass("hidden"),$(".i-technics__hide").removeClass("hidden")}),$(document).on("click",".i-technics__hide",function(t){t.preventDefault(),$(".i-technics__more_list").slideUp(),$(this).addClass("hidden"),$(".i-technics__show_all").removeClass("hidden")}),function(){var t=echo.tooltip?echo.tooltip:echo.tooltip={};t.open=function(t,e){t.data("tooltip__init")||(t.tooltipster({trigger:"custom",maxWidth:320,trackerInterval:15,trackOrigin:!0,triggerOpen:{},triggerClose:{click:!0,scroll:!0,tap:!0}}),t.data("tooltip__init",1)),t.tooltipster("content",e).tooltipster("open")},t.close=function(t){t.data("tooltip__init")&&t.tooltipster("close")},t.close_all=function(t){if(t)t.find(".tooltipstered").tooltipster("close");else{var e=$.tooltipster.instances();$.each(e,function(t,e){e.close()})}}}();